# 0819



### í˜ì´ì§• ì²˜ë¦¬ ì™œ í•´ì•¼í•˜ëŠ”ì§€?

ë¸Œë¼ìš°ì € - ì„œë²„ - DB

DBì—ì„œ ë³´ë‚´ì˜¤ëŠ” dataì–‘ì´ ë§ì„ìˆ˜ë¡ ë©”ëª¨ë¦¬ ì†Œëª¨ë„ í¬ê³  ì†ë„ë„ ëŠë ¤ì§

ê·¸ë˜ì„œ

**í•„ìš”í•œ ë§Œí¼ë§Œ!**

**ìµœì†Œí•œì˜ ì‹œê°„ì—!**

ì²˜ë¦¬í•˜ê¸°ìœ„í•´ì„œ



#### í˜ì´ì§•ì²˜ë¦¬ ëª©ì  / ê²°ê³¼

URLì— í˜ì´ì§€ ì •ë³´ê°€ ìˆìœ¼ë©´ ì¶œë ¥

ì²˜ìŒë¶€í„° í˜ì´ì§€ë¥¼ ë¶™ì´ê³  ê³ ë¯¼í•˜ì§€ë§ê³  ì¶œë ¥ë˜ëŠ”ê±° ë³´ê³  ë§ˆì§€ë§‰ì— ì¶”ê°€í•˜ëŠ”ê²Œ í¸í•¨

ì™œ? -> ìš”ì¦˜ì€ ìŠ¤í¬ë¡¤ë§ ë°©ì‹ìœ¼ë¡œ ì—…ë°ì´íŠ¸



JSPì“°ëŠ”ê±°ë³´ë‹¤ MyBatis ê°€ ë” ëŠë¦°ë° ì™œ?

ë¸Œë¼ìš°ì €ì˜ ì–‘ì´ ì ì–´ì§€ë‹ˆê¹Œ ë©”ëª¨ë¦¬ ì†Œëª¨ ì ìŒ



------

## í˜ì´ì§•ì²˜ë¦¬ ì¶”ê°€

### `PageMaker.java` ìƒì„±

dtoì— í˜ì´ì§€ ê³„ì‚°ì„ í•´ì¤„ pagemakerë¥¼ ì¶”ê°€í•´ì¤Œ

```java
@Getter
@ToString
public class PageMaker {

    private int start, end, page, size, total;
    private boolean prev, next;

    //ì—¬ëŸ¬ ì •ë³´ ì „ë‹¬í•  ë•Œ => ìƒì„±ì í†µí•´ í•œë²ˆì— ì „ë‹¬
    //ë‚˜ì¤‘ì— ELí†µí•´ ë¶ˆëŸ¬ì™€ì•¼í•˜ë¯€ë¡œ Getter ì¶”ê°€
   public PageMaker(int page, int size, int total) {

       this.page = page;
       this.size = size;
       this.total = total;

       //ë§ˆì§€ë§‰ í˜ì´ì§€ end ê³„ì‚°
       end = (int)(Math.ceil(page / 10.0) * 10);
       start = end - 9;

       //ì´ì „, ë‹¤ìŒ í˜ì´ì§€ëŠ” booleanìœ¼ë¡œ ì²˜ë¦¬í•´ì„œ ì¡°ê±´ì— ë§ìœ¼ë©´ ì¶œë ¥ë˜ë„ë¡ í•˜ê³  ì•„ë‹ˆë©´ ì¶œë ¥ì•ˆë˜ë„ë¡ ì„¤ì •
       //ex. ë§¨ ì²« í˜ì´ì§€ì—ëŠ” ì´ì „ì´ ì—†ê³  ë§¨ ë í˜ì´ì§€ì—ëŠ” ì´í›„ê°€ ì—†ìŒ
       prev = start > 1;
       next = (total / (double)size) > end;

       //ì „ì²´ í˜ì´ì§€ê°€ ì•ˆë§ì•„ì„œ total ê³„ì‚° ì²˜ë¦¬í•´ì¤Œ
	   //if (end * size > total) { end = (int)(Math.ceil(total/(double)size)); }
       //ì‚¼í•­ì—°ì‚°ìë¡œë„ ë§Œë“¤ ìˆ˜ ìˆìŒ
       end = end * size > total ? (int)(Math.ceil(total/(double)size)) : end;
       //ì‚¼í•­ì—°ì‚°ìëŠ” ì—°ì‚°ìë¼ ì¡°ê±´ë¬¸ê³¼ ë‹¬ë¦¬ ê°’ì„ ë§Œë“¤ì–´ë‚´ì•¼í•˜ëŠ”ê²Œ ë‹¤ë¦„
    }
}
```

í˜ì´ì§€ ì²˜ë¦¬ì— í•„ìš”í•œ í˜„ì¬ í˜ì´ì§€ *page*ì™€ í•œ í˜ì´ì§€ì— ì¶œë ¥ë  ë°ì´í„°ì˜ í¬ê¸°ì¸ *size* 

ì‹œì‘í˜ì´ì§€ *start* ì™€ ëí˜ì´ì§€ *end* 

booleanìœ¼ë¡œ ìœ ë¬´ë¥¼ í‘œí˜„í•œ ì´ì „ *prev*, ë‹¤ìŒ *next*

ê°ê°ì˜ ê°’ì„ ë°›ì•„ ì„¤ì •í•´ ë„˜ê²¨ì¤Œ



### `list.jsp` ìˆ˜ì •

```xml
<%@ page contentType="text/html;charset=UTF-8" pageEncoding="UTF-8" language="java" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<html>
<head>
    <title>LIST</title>
</head>
<body>

    <script>

        //ë¬¸ìì—´í™” -> ë¬¸ìì—´ì´ê±°ë‚˜ ê³µë°±ì´ê±°ë‚˜ => ê°’ì´ ì•ˆë„˜ì–´ì˜¤ë©´ ê·¸ëƒ¥ ê³µë°± = alert ì•ˆëœ¸
        let num = '${param.bno}'
        //let í•¨ìˆ˜ -> varê³¼ ë‹¤ë¥´ê²Œ ì¤‘ë³µ ì„ ì–¸ ì‹œ ì—ëŸ¬ ë°œìƒ
        //ì„ ì–¸ê³¼ ì´ˆê¸°í™”ë¥¼ ë”°ë¡œ í•  ìˆ˜ ìˆìŒ
        //let num; num = '$ {param.bno}';

        //ì¡´ì¬ìœ ë¬´ ê·¸ëƒ¥ ì´ë ‡ê²Œë§Œ ì¨ë„ ê°€ëŠ¥
        //if (ë³€ìˆ˜) -> null check êµ¬ë¬¸
        if(num) {
            alert(num)
            history.replaceState(null, '', '/board/list');
        }

    </script>

    <h1> ğŸ“„ List Page</h1>

    <h3 style="color: gainsboro">${pageMaker}</h3>

    <!-- í•œ í˜ì´ì§€ì— ì¶œë ¥ë  ê°œìˆ˜=size ì„ íƒ íƒœê·¸ ì…ë ¥ -->
    <form action="/board/list" method="get">
        
        <!-- Hidden tag : í˜ì´ì§€ì— ì¶œë ¥ë˜ì§€ëŠ” ì•Šì§€ë§Œ javaíŒŒì¼ì— ê°’ ë„˜ê²¨ì£¼ê³ ì‹¶ì„ ë•Œ ì‚¬ìš©-->
        <input type="hidden" name="page" value="1">
            
        <select name="size">
            <!-- ì½¤ë³´ë°•ìŠ¤ì— ê¸°ë³¸ê°’ìœ¼ë¡œ ë„ìš°ê³ ì‹¶ì€ ì˜µì…˜ => selected -->
            <!-- ê·¸ëŸ°ë° ì—¬ê¸°ì„  ë°”ë€ ê°’ìœ¼ë¡œ ë„ì›Œì¡Œìœ¼ë©´ ì¢‹ê² ìŒ => ì‚¼í•­ì—°ì‚°ìë¡œ ì¡°ê±´ì£¼ê¸°-->
            <!-- ì‚¼í•­ì—°ì‚°ìë¥¼ ì´ìš©í•´ valueê°€ í•´ë‹¹ ê°’ì¼ë•Œ selected ë¨¹ë„ë¡ ì„¤ì • -->
            <option value="10" ${pageMaker.size == 10 ? "selected" : ""}>10</option>
            <option value="20" ${pageMaker.size == 20 ? "selected" : ""}>20</option>
            <option value="50" ${pageMaker.size == 50 ? "selected" : ""}>50</option>
            <option value="100" ${pageMaker.size == 100 ? "selected" : ""}>100</option>
        </select>
        <button type="submit">ì ìš©</button>
    </form>

    <hr/>
    <ul class="list">
        <c:forEach items="${dtoList}" var="dto">
            <li>
                <div>
                    <!-- EL ì´ìš©í•´ BoardDTOì— ì €ì¥ëœ ì •ë³´ ì¤‘ ê²Œì‹œíŒì— ë„ìš°ê³ ì‹¶ì€ ì •ë³´ë§Œ ë¶ˆëŸ¬ì˜´ -->
                    <!-- ê¸€ë²ˆí˜¸, ì œëª©, ì¡°íšŒìˆ˜, ì‘ì„±ì¼ -->
                    <div>${dto.bno}</div>
                    <!-- ì œëª©ì— a íƒœê·¸ ì´ìš©í•´ ìƒì„¸ë³´ê¸°ë¡œ ì´ë™í•  ìˆ˜ ìˆëŠ” ë§í¬ ë¶€ì—¬ -->
                    <div><a href="/board/read?bno=${dto.bno}&page=${pageMaker.page}&size=${pageMaker.size}" class="link">${dto.title}</a></div>
                    <div>${dto.viewcount}</div>
                    <div>${dto.regdate}</div>
                </div>
            </li>
        </c:forEach>
    </ul>
    <hr/>

        <!-- ul íƒœê·¸ ì´ìš©í•´ ê²Œì‹œíŒ ë¦¬ìŠ¤íŠ¸ ì •ë ¬ -->
    <ul class="pageList">

        <!-- c íƒœê·¸ ì´ìš©í•´ ë¶ˆëŸ¬ì˜¬ ê¸€ ê°œìˆ˜ë§Œí¼ ë°˜ë³µí•´ ì¶œë ¥í•˜ë„ë¡í•¨ -->
        <c:if test="${pageMaker.prev}">
            <li><a href="/board/list?page=${pageMaker.start - 1}&size=${pageMaker.size}"> < PREV </a></li>
        </c:if>

        <!-- pagemakerì—ì„œ ì„¤ì •í•œ startê°’ê³¼ end ê°’ì„ ì´ìš©í•´ í•œ í˜ì´ì§€ì— ì¶œë ¥ë  ëª©ë¡ ë²ˆí˜¸ ë¶ˆëŸ¬ì˜¤ê¸° -->
        <c:forEach begin="${pageMaker.start}" end="${pageMaker.end}" var="page">
            <li class="${page==pageMaker.page?"current":""}" ><a href="/board/list?page=${page}&size=${pageMaker.size}">[ ${page} ]</a></li>
        </c:forEach>

        <c:if test="${pageMaker.next}">
            <li><a href="/board/list?page=${pageMaker.end + 1}&size=${pageMaker.size}"> NEXT > </a></li>
        </c:if>

    </ul>
</body>
</html>
```





#### ê²°ê³¼

![image](https://user-images.githubusercontent.com/81224398/130061894-8328ca18-6f51-4de1-acc2-1c325404d96c.png)

í˜ì´ì§€ ì£¼ì†Œì—ë„ í˜„ì¬ í˜ì´ì§€ ì •ë³´ì™€ sizeê°€ ì˜ ë„˜ì–´ê°”ê³  ëª©ë¡ì´ ì˜ ì¶œë ¥ë¨

í˜ì´ì§€ ë²ˆí˜¸ë„ 1~10í˜ì´ì§€ê°€ ì œëŒ€ë¡œ ë‚˜ì˜¤ê³  ì œì¼ ì²«ì¥ì´ê¸°ë•Œë¬¸ì— ì´ì „ì€ ì—†ê³  ë‹¤ìŒë§Œ ìˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŒ





----

## read ìƒì„¸ë³´ê¸° ì¶”ê°€



...



----

## Filter

ì—¬ëŸ¬ê°œì˜ controllerë¥¼ í•˜ë‚˜ë¡œëª¨ì•„ì„œ ì„¤ì •









----













### ERD

Entity-Relationship Diagram

ê°œì²´ ê´€ê³„ ëª¨ë¸



í…Œì´ë¸” êµ¬ì¡°í™”

ì–´ë–¤ í…Œì´ë¸”ë“¤ì´ ì–´ë–»ê²Œ ì—°ê´€ì´ ë˜ì–´ìˆëŠ”ì§€?







----

ë¹„ì‹¼ db?

ì™œ ì¨? - ì•ˆì „/ì •ë¦¬/ì˜¤ë˜/ì¤‘ìš”



ë­ê°€ ì¤‘ìš”? > ëˆì´ ë˜ë‹ˆê¹Œ

ë­ê°€ ëˆì´ ë˜ëŠ”ë°? > *ì˜ë¯¸ë¥¼ ê°€ì§„ data*, *ìˆ˜ì§‘ì— ì‹œê°„ì´ ì˜¤ë˜ê±¸ë¦¬ëŠ” data*



#### database table ë§Œë“œëŠ” ê²ƒ

- ëª…ì‚¬

- íˆìŠ¤í† ë¦¬ - ë¬´ì–¸ê°€ì˜ ê¸°ë¡, ë‚´ì—­



**ëª…ì‚¬ ì„ ì • ë¨¼ì €!**

ëª…ì‚¬ = ~~ ê´€ë ¨ ë°ì´í„°

=> ì´ëŸ° data = ë„ë©”ì¸



### ë§›ì§‘ ì„œë¹„ìŠ¤

#### 1ì°¨ ë„ë©”ì¸

í° í¬ê´„ ëª…ì‚¬ ë¨¼ì € ì„ ì •

ë§›ì§‘ / íšŒì›



#### 2ì°¨ ë„ë©”ì¸

ë‘˜ì´ ê²¹ì¹˜ëŠ” ëª…ì‚¬

ë§›ì§‘ / íšŒì›

â€‹        |

â€‹     ë¦¬ë·°





1ì°¨ ë„ë©”ì¸ì€ ë¬´ì¡°ê±´ ëŒ€í‘œí•˜ëŠ” í…Œì´ë¸” í•˜ë‚˜ì”© ì¡´ì¬













### ì™¸ë˜í‚¤

Forien key



PK - ì¸ë±ìŠ¤ ìë™ ìƒì„±

FK -> ??





|      FK ( ì™¸ë˜í‚¤ )       |       PK        |
| :----------------------: | :-------------: |
| ë¬´ê²°ì„± (dataë¥¼ ê¹”ë”í•˜ê²Œ) |   ì¸ë±ìŠ¤ ìƒì„±   |
|                          |   ê³ ìœ  ì‹ë³„í‚¤   |
|                          | ë…¼ë¦¬ì  / DBêµ¬ì¡° |



ì™¸ë˜í‚¤ì„¤ì •ì‹œ 

íšŒì› - ì§ˆë¬¸

íšŒì› 1 : N ì§ˆë¬¸

=> íšŒì›1 - ì§ˆë¬¸1, 2, 3, ...

íšŒì›1 ë°ì´í„°ë¥¼ ì§€ìš°ë ¤í• ë•Œ ì—ëŸ¬ë°œìƒ

